<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  

<header>
  <div class="control">
    <button class="button is-link" id="createNewPostBtn">Create New Post</button>
  </div>
</header>

<section class="hidden" id="createPost" style="max-width: 20em;">
  <h1 class="createPostTitle"><strong>Create Post</strong></h1>
 <form id="createPostForm">
  <div class="file">
    <label class="file-label">
     <button id="upload_widget" class="cloudinary-button">Upload Files</button>
    </label>
  </div>
  <input id="post-title" class="form-control input is-normal" type="text" placeholder="Enter a title...">
  {{!-- <input id="post-title" class="form-control" type="text" placeholder="Enter a title..."> --}}
  <div class="field">
    <div class="control">
      <textarea class="textarea" placeholder="Enter message text..."></textarea>
    </div>
  </div>
  <div class="field is-grouped">
    <div class="control">
      <button class="button is-link" id="submitButton">Submit</button>
    </div>
    <div class="control">
      <button class="button is-link is-light" id="cancelButton">Cancel</button>
    </div>
  </div>
  </form>
</section>

<section>
  <div id="posts">
    {{#each posts.posts as |post|}}
    <div class="card" style="max-width: 40em;">
      <div class="card-image">
        <figure class="image is-2by1">
          <img src="{{post.code_block}}" alt="Placeholder image">
        </figure>
      </div>
      <div class="card-content">
        <div class="media">
          <div class="media-content">
            <h5 class="card-title title is-4">{{post.title}}</h5>
            <p class="title is-6">
            {{#if post.user_id}}
            <a>Created by {{post.user.name}} on {{format_date post.date_created}}</a>
            {{else}}
            Deleted user
            {{/if}}
            </p> 
          </div>
        </div>
        <div class="content"> 
          {{post.text}}
        </div>
        {{!-- <svg id="like-button" class="likeButton" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-square-heart-fill" viewBox="0 0 16 16">
          <path d="M2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2Zm6 3.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"/>
        </svg>
        <div id="like-counter" class="like">{{post.likes}}</div> --}}
        <hr class="line">
        <p class="comments">Comments:</p>
        {{#each post.comments as |comment|}}
        <p class="comment-text" data-id='{{comment.id}}'><strong>{{comment.user.name}}</strong>&nbsp {{comment.text}} {{{check_id ../../userId comment.user_id}}}</p>
        {{/each}}   
      </div>
    </div>
    <article class="media" style="max-width: 40em;">
      <div class="media-content">
        <div class="field">
          <p class="control">
           <textarea class="textarea" id="new-comment-{{post.id}}" placeholder="Add a comment..."></textarea>
          </p>
        </div>
        <nav class="level">
          <div class="level-left">
            <div class="level-item">
              <button class="button is-info btn-submit" id="commentButton" data-postid={{post.id}}>Comment</button>
              {{#delete_post user_id ../userId}}
              <button class="button is-info btn-delete" id="deleteButton" data-postid={{post.id}}>Delete Post</button>
              {{/delete_post}}
              {{!-- added for update post button --}}
              {{!-- {{#update_post user_id ../userId}}
              <button class="button is-info btn-update" id="updateButton" data-postid={{post.id}}>Update Post</button>
              {{/update_post}} --}}
            </div>
          </div>
        </nav>
      </div>
    </article>
    {{/each}}
    <script
    src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous"></script>
    <script src="./js/comment.js"></script>
    <script src="./js/createPost.js"></script>
</div>


</section>




